#include "text.h"
#include <iostream>
#include <sstream>
#include <string>
#include <vector>
#include <algorithm>
#include "Options.h"
#include <thread>
#include <chrono>
#include <atomic>

using namespace std;

std::string items = R"(                                                                          |                           
                                                                          |                           
                                                                          |                           
                                                                          |                           
                                                                          |                           )";
std::string pasiws = R"(|                              |.
|                              |.
|                              |.
|                              |.
|                              |.)";

int hp = 100;

int mana = 100;



void title() {
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;

    cout << ends << ends << ends << ends << R"(                                                 ________  ___     ___    ___ _______   ___               ________  ________  _____ ______   _______   ________
                                                |\   __  \|\  \   |\  \  /  /|\  ___ \ |\  \             |\   ____\|\   __  \|\   _ \  _   \|\  ___ \ |\   ____\
                                                \ \  \|\  \ \  \  \ \  \/  / | \   __/|\ \  \            \ \  \___|\ \  \|\  \ \  \\\__\ \  \ \   __/|\ \  \___|_
                                                 \ \   ____\ \  \  \ \    / / \ \  \_|/_\ \  \            \ \  \  __\ \   __  \ \  \\|__| \  \ \  \_|/_\ \_____  \
                                                  \ \  \___|\ \  \  /     \/   \ \  \_|\ \ \  \____        \ \  \|\  \ \  \ \  \ \  \    \ \  \ \  \_|\ \|____|\  \
                                                   \ \__\    \ \__\/  /\   \    \ \_______\ \_______\       \ \_______\ \__\ \__\ \__\    \ \__\ \_______\____\_\  \
                                                    \|__|     \|__/__/ /\ __\    \|_______|\|_______|        \|_______|\|__|\|__|\|__|     \|__|\|_______|\_________\
                                                                  |__|/ \|__|                                                                            \|_________|
    )";
}

void options() {
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;

    cout << ends << ends << ends << ends << R"(                                                                             _____             _____       _____                 _____
                                                                            ( ___ )-----------( ___ )     ( ___ )---------------( ___ )
                                                                             |   |             |   |       |   |                 |   |
                                                                             |   |    Play     |   |       |   |    Inventory    |   |
                                                                             |___|             |___|       |___|                 |___|
                                                                            (_____)-----------(_____)     (_____)---------------(_____)
    )";


}

void input() {
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    cout << "            											         ";
}

void viewArmor() {

    string item1 = R"(                                                    |           |--------|           |.
                                                                          |           |   ||   |           |.
                                                                          |           \===[]===/           |.
                                                                          |            \  ||  /            |.
                                                                          |             ------             |.)";

    string item2 = R"(                                                                          |      /\                      |                              |.
                                                                          |   |####==================-   |                              |.
                                                                          |      \/               )";

    string item3 = R"(                                                                          |                  \---/       |                              |.
                                                                          |      o================>      |                              |.
                                                                          |                  /___\)";


    for (int i = 0; i < 4; ++i) cout << endl;


    cout << R"(                                                                         _______________________________________________________________
                                                                        /  \                             |                              \.
                                                                       |  |              Hp:             |             Mana:            |.
                                                                        \_|    +--------------------+    |    +--------------------+    |.)" << endl;
    cout << "                                                                          |    |#########" << hp << "########|    |    |#########" << mana << "########|    |." << endl;
    cout << R"(                                                                          |    +--------------------+    |    +--------------------+    | .
                                                                          |                              |                              |.
                                                                          |______________________________|______________________________|.
                                                                          |                                                             |.
                                                                          |                                                             |.
                                                                          |                         _,.                                 |.                           
                                                                          |                        ` -.)                                |.
                                                                          |                      ( _/-\\-._                             |.
                                                                          |                     /,|`--._,-^|            ,               |.
                                                                          |                     \_| |`-._/||          ,'|               |.
                                                                          |                       |  `-, / |         /  /               |.
                                                                          |                       |     || |        /  /                |.
                                                                          |                        `r-._||/   __   /  /                 |.
                                                                          |                    __,-<_     )`-/  `./  /                  |.
                                                                          |                   '  \   `---'   \   /  /                   |.
                                                                          |                       |           |./  /                    |.
                                                                          |                       /           //  /                     |.
                                                                          |                   \_/' \         |/  /                      |.
                                                                          |                    |    |   _,^-'/  /                       |.
                                                                          |                    |    , ``  (\/  /_                       |.
                                                                          |                     \,.->._    \X-=/^                       |.
                                                                          |                     (  /   `-._//^`                         |.
                                                                          |                      `Y-.____(__}                           |.
                                                                          |                       |     {__)                            |.
                                                                          |                             ()                              |.
                                                                          |                                                             |.
                                                                          |                                                             |.
                                                                          |_____________________________________________________________|.
                                                                          |                              |                              |.)" << endl;

    showItemsAndPasiws();

cout << R"(                                                                          |______________________________|______________________________|____
                                                                          |   /                                                             /.
                                                                          \_ /dc___________________________________________________________/.)" << endl;

}

//   _______________________________________________________________
// / \                               |                              \.
//|   |              Hp:             |             Mana:            |.
// \_ |    +--------------------+    |    +--------------------+    |.
//    |    |#########100########|    |    |#########100########|    |.
//    |    +--------------------+    |    +--------------------+    |.
//    |                              |                              |.
//    |______________________________|______________________________|.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |                                                             |.
//    |_____________________________________________________________|____
//    |   /                                                             /.
//    \_ /dc___________________________________________________________/.


void Options_of_Wepons_or_PasiweItem() {
    cout << endl;


    cout << R"(                                                                            _____               _____       _____                   _____
                                                                           ( ___ )-------------( ___ )     ( ___ )-----------------( ___ )
                                                                            |   |               |   |       |   |                   |   |
                                                                            |   |    Wepons     |   |       |   |    PasiweItems    |   |
                                                                            |___|               |___|       |___|                   |___|
                                                                           (_____)-------------(_____)     (_____)-----------------(_____)
    )";
}


namespace AsciiWeapons {
    vector<string> sword = { R"(
    
    +-----------------------------------------------------------+
    |                                                           |
    |                />_________________________________        |
    |       [########[]_________________________________>       |
    |                \>                                         |
    |                                                           |
    |  Obrażenia:                                               |
    |  30                                                       |
    |                                                           |
    |  Umiejętność:                                             |
    |  cena 30 punktów many                                     |
    |  Zadaje dodatkowe 10 obrażeń i blokuje na 1 rundę         |
    |  umiejętność wroga.                                       |
    |                                                           |
    +-----------------------------------------------------------+     
             

    +-----------------------------------------------------------+
    |                                                           |  
    |        ,  /\  .                                           |
    |       //`-||-'\\                                          |
    |      (| -=||=- |)         Obrażenia:                      |
    |       \\,-||-.//          20                              |
    |        `  ||  '                                           |
    |           ||              Umiejętność:                    |
    |           ||              cena 50 punktów many            |
    |           ||              Zadaje krytyczny cos który      |
    |           ||              zada 30 obrażeń                 |
    |           ||                                              |
    |           ()                                              |
    |                                                           |
    +-----------------------------------------------------------+


    +-----------------------------------------------------------+
    |                                                           |
    |                                                           |
    |               /\                                          |
    |   /vvvvvvvvvvvv \--------------------------------------,  | 
    |   `^^^^^^^^^^^^ /====================================="   |
    |               \/                                          |
    |                                                           |
    |                                                           |
    |  Obrażenia:                                               |
    |  20                                                       |
    |                                                           |
    |  Umiejętność:                                             |
    |  cena 60 punktów many                                     |
    |  Nakłada krwawienie na przeciwnika przez co kolejne 3     |
    |  rundy dostaje 10 obrażeń                                 |
    |                                                           |
    +-----------------------------------------------------------+   
    )"

    };

    void viewWeapon(const vector<string>& weapon) {
        for (const auto& linia : weapon) {
            cout << linia << endl;
        }
    }

    vector<string> shields = { R"(
    +-----------------------------------------------------------+
    |                                                           |  
    |            _..._                                          |
    |        .-'_.---._'-.                                      |
    |        ||####|(__)||        Hroni:                        |
    |        ((####|(**)))        50                            |
    |         '\###|_''/'                                       |
    |          \\()|##//          Pasywna Umiejętność:          |
    |           \\ |#//           Dodaje 30 do maksymalnego     |
    |            .\_/.            zdrowia.                      |
    |             L.J                                           |
    |              "                                            |
    |                                                           |
    +-----------------------------------------------------------+


    +-----------------------------------------------------------+
    |                                                           |  
    |       |`-._/\_.-`|                                        |
    |       |    ||    |           Hroni:                       |
    |       |___o()o___|           65                           |
    |       |__((<>))__|                                        |
    |       \   o\/o   /           Pasywna Umiejętność:         |
    |        \   ||   /            Dodaje do zdrowia 15 i do    |
    |         \  ||  /             many 15                      |
    |          '.||.'                                           |
    |            ``                                             |
    |                                                           |
    +-----------------------------------------------------------+


    +-----------------------------------------------------------+
    |                                                           |  
    |         |\ _..--.._ /|                                    |
    |         |############|                                    |
    |          )##########(        Hroni:                       |
    |       ._/##.'//\\'.##\_.     50                           |
    |        .__)#((()))#(__.                                   |
    |         \##'.\\//.'##/       Pasywna Umiejętność:         |
    |          \####\/####/        Dodaje 30 do maksymalnej     |
    |          /,.######.,\        ilości many                  |
    |         (  \##__##/  )                                    |
    |             "(\/)'                                        |
    |               )(|                                         |
    |                                                           |
    +-----------------------------------------------------------+
    )"
    };

    void viewPasiweItem(const vector<string>& pasiws) {
        for (const auto& linia : pasiws) {
            cout << linia << endl;
        }
    }
}

void showItemsAndPasiws() {
    vector<string> lines_items;
    vector<string> lines_pasiws;

    stringstream ss_items(items);
    stringstream ss_pasiws(pasiws);

    string line;

    while (getline(ss_items, line)) {
        lines_items.push_back(line);
    }

    while (getline(ss_pasiws, line)) {
        lines_pasiws.push_back(line);
    }


    size_t max_lines = max(lines_items.size(), lines_pasiws.size());

    for (size_t i = 0; i < max_lines; ++i) {
        if (i < lines_items.size()) {
            cout << lines_items[i];
        }
        else {
            cout << string(74, ' ');
        }

        cout << "   ";

        if (i < lines_pasiws.size()) {
            cout << lines_pasiws[i];
        }

        cout << endl;
    }
}

void LevelFunction(atomic<bool>& running) {
    for (int i = 0; i < 21; ++i) cout << endl;

    cout << R"(
                                                                                   __                              ___          _     
                                                                                  /\ \                            /\_ \       /' \    
                                                                                  \ \ \         __   __  __     __\//\ \     /\_, \   
                                                                                   \ \ \  __  /'__`\/\ \/\ \  /'__`\\ \ \    \/_/\ \  
                                                                                    \ \ \L\ \/\  __/\ \ \_/ |/\  __/ \_\ \_     \ \ \ 
                                                                                     \ \____/\ \____\\ \___/ \ \____\/\____\     \ \_\
                                                                                      \/___/  \/____/ \/__/   \/____/\/____/      \/_/
)";
this_thread::sleep_for(chrono::milliseconds(100)); // interwał
}

void LevelView() {
    atomic<bool> running{ true };
    thread worker(LevelFunction, ref(running));

    this_thread::sleep_for(chrono::seconds(3)); // czas trwania
    running = false;

    worker.join();
}

void View_of_fight() {
    cout << R"(
             _________________________________________________________________________________________________________________________________________________________________________________________
            / \                                                                                                                                                                                        \.
           |   |                                                                                                                                                                                       |.
            \_ |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |                                                                                                                                                                                       |.
               |_______________________________________________________________________________________________________________________________________________________________________________________|____
               |   /                                                                                                                                                                                       /.
               \_ /dc_____________________________________________________________________________________________________________________________________________________________________________________/.
)" << endl;
}

void View_fight_options() {
    cout << R"(                                   _____                      _____       _____                    _____       _____                       _____       _____                 _____
                                  ( ___ )--------------------( ___ )     ( ___ )------------------( ___ )     ( ___ )---------------------( ___ )     ( ___ )---------------( ___ )  
                                   |   |                      |   |       |   |                    |   |       |   |                       |   |       |   |                 |   |
                                   |   |    Normal Attack     |   |       |   |    Super Attack    |   |       |   |    Use Pasiwe Item    |   |       |   |    End Round    |   |
                                   |___|                      |___|       |___|                    |___|       |___|                       |___|       |___|                 |___|
                                  (_____)--------------------(_____)     (_____)------------------(_____)     (_____)---------------------(_____)     (_____)---------------(_____)    
    )";
    cout << endl;
}